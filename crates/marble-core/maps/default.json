{
  "meta": {
    "name": "3D Pinball",
    "gamerule": ["top_n", "last_n"],
    "live_ranking": {
      "type": "distance",
      "target_id": "goal"
    }
  },
  "objects": [
    {
      "role": "spawner",
      "shape": { "type": "rect", "center": [300.0, 100.0], "size": [400.0, 80.0], "rotation": 0.0 },
      "properties": { "spawn": { "mode": "random", "initial_force": "random" } }
    },

    { "role": "obstacle", "shape": { "type": "line", "start": [0.0, 0.0], "end": [600.0, 0.0] } },
    { "role": "obstacle", "shape": { "type": "line", "start": [600.0, 0.0], "end": [600.0, 1000.0] } },
    { "role": "obstacle", "shape": { "type": "line", "start": [600.0, 1000.0], "end": [0.0, 1000.0] } },
    { "role": "obstacle", "shape": { "type": "line", "start": [0.0, 1000.0], "end": [0.0, 0.0] } },

    {
      "role": "obstacle",
      "shape": { "type": "circle", "center": [150.0, 250.0], "radius": 25.0 },
      "properties": { "bumper": { "force": 1.2 } }
    },
    {
      "role": "obstacle",
      "shape": { "type": "circle", "center": [300.0, 250.0], "radius": 25.0 },
      "properties": { "bumper": { "force": 1.2 } }
    },
    {
      "role": "obstacle",
      "shape": { "type": "circle", "center": [450.0, 250.0], "radius": 25.0 },
      "properties": { "bumper": { "force": 1.2 } }
    },

    {
      "role": "obstacle",
      "shape": { "type": "circle", "center": [200.0, 350.0], "radius": 22.0 },
      "properties": { "bumper": { "force": 1.0 } }
    },
    {
      "role": "obstacle",
      "shape": { "type": "circle", "center": [400.0, 350.0], "radius": 22.0 },
      "properties": { "bumper": { "force": 1.0 } }
    },

    {
      "role": "obstacle",
      "shape": { "type": "circle", "center": [120.0, 450.0], "radius": 20.0 },
      "properties": { "bumper": { "force": 0.9 } }
    },
    {
      "role": "obstacle",
      "shape": { "type": "circle", "center": [480.0, 450.0], "radius": 20.0 },
      "properties": { "bumper": { "force": 0.9 } }
    },
    {
      "role": "obstacle",
      "shape": { "type": "circle", "center": [300.0, 500.0], "radius": 18.0 },
      "properties": { "bumper": { "force": 0.8 } }
    },

    {
      "id": "spinner_left",
      "role": "obstacle",
      "shape": { "type": "rect", "center": [150.0, 560.0], "size": [130.0, 8.0], "rotation": 0.0 },
      "properties": { "roll": { "direction": "clockwise", "speed": 130.0 } }
    },
    {
      "id": "spinner_right",
      "role": "obstacle",
      "shape": { "type": "rect", "center": [450.0, 560.0], "size": [130.0, 8.0], "rotation": 0.0 },
      "properties": { "roll": { "direction": "counterclockwise", "speed": 130.0 } }
    },

    {
      "role": "obstacle",
      "shape": { "type": "circle", "center": [220.0, 650.0], "radius": 18.0 },
      "properties": { "bumper": { "force": 0.7 } }
    },
    {
      "role": "obstacle",
      "shape": { "type": "circle", "center": [380.0, 650.0], "radius": 18.0 },
      "properties": { "bumper": { "force": 0.7 } }
    },
    {
      "id": "flipper_left",
      "role": "obstacle",
      "shape": { "type": "rect", "center": [160.0, 850.0], "size": [120.0, 12.0], "rotation": -20.0 }
    },
    {
      "id": "flipper_right",
      "role": "obstacle",
      "shape": { "type": "rect", "center": [440.0, 850.0], "size": [120.0, 12.0], "rotation": 20.0 }
    },

    { "role": "obstacle", "shape": { "type": "line", "start": [0.0, 700.0], "end": [230.0, 1000.0] } },
    { "role": "obstacle", "shape": { "type": "line", "start": [600.0, 700.0], "end": [370.0, 1000.0] } },

    {
      "id": "goal",
      "role": "trigger",
      "shape": { "type": "circle", "center": [300.0, 950.0], "radius": 45.0 },
      "properties": {
        "blackhole": { "force": "0.15 + 0.05 * game.time" },
        "trigger": { "action": "gamerule" }
      }
    }
  ],
  "keyframes": [
    {
      "name": "flipper_left_cycle",
      "autoplay": true,
      "keyframes": [
        { "type": "loop_start" },
        { "type": "delay", "duration": "random(1, 3.0)" },
        { "type": "pivot_rotate", "target_ids": ["flipper_left"], "pivot": [80.0, 850.0], "angle": 35.0, "duration": 0.1, "easing": "ease_out" },
        { "type": "delay", "duration": 0.1 },
        { "type": "pivot_rotate", "target_ids": ["flipper_left"], "pivot": [80.0, 850.0], "angle": 0.0, "duration": 0.15, "easing": "ease_in" },
        { "type": "loop_end" }
      ]
    },
    {
      "name": "flipper_right_cycle",
      "autoplay": true,
      "keyframes": [
        { "type": "loop_start" },
        { "type": "delay", "duration": "random(1, 3.0)" },
        { "type": "pivot_rotate", "target_ids": ["flipper_right"], "pivot": [480.0, 850.0], "angle": -35.0, "duration": 0.1, "easing": "ease_out" },
        { "type": "delay", "duration": 0.1 },
        { "type": "pivot_rotate", "target_ids": ["flipper_right"], "pivot": [480.0, 850.0], "angle": 0.0, "duration": 0.15, "easing": "ease_in" },
        { "type": "loop_end" }
      ]
    }
  ]
}
